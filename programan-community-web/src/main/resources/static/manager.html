<!DOCTYPE html>
<!--
BeyondAdmin - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.2.0
Version: 1.0.0
Purchase: http://wrapbootstrap.com
-->

<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<!-- Head -->
<head>
    <meta charset="utf-8" />
    <title>IT社区后台</title>

    <meta name="description" content="data tables" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="shortcut icon" href="/img/logo/falo.png" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="/font-awesome-4.7.0/css/font-awesome.min.css"/>
	<!--<link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">-->
    <!--Basic Styles-->
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
    <link id="bootstrap-rtl-link" href="" rel="stylesheet" />
    <link href="/assets/css/font-awesome.min.css" rel="stylesheet" />
    <link href="/assets/css/weather-icons.min.css" rel="stylesheet" />

    <!--Fonts-->
    <!-- <link href="http://fonts.useso.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300" rel="stylesheet" type="text/css"> -->

    <!--Beyond styles-->
    <link id="beyond-link" href="/assets/css/beyond.min.css" rel="stylesheet" />
    <link href="/assets/css/demo.min.css" rel="stylesheet" />
    <link href="/assets/css/typicons.min.css" rel="stylesheet" />
    <link href="/assets/css/animate.min.css" rel="stylesheet" />
    <link id="skin-link" href="" rel="stylesheet" type="text/css" />
	<link rel="stylesheet" type="text/css" href="/css/index.css"/>
    <!--Page Related styles-->
    <link href="/assets/css/dataTables.bootstrap.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="/css/style.css"/>
    <link rel="stylesheet" type="text/css" href="/css/index.css"/>
    <!--Skin Script: Place this script in head to load scripts for skins and rtl support-->
    <script src="/assets/js/jquery-2.0.3.min.js"></script>
    <script src="/assets/js/skins.min.js"></script>
    <script src="/layer/layer.js" type="text/javascript" charset="utf-8"></script>
    <style type="text/css">
    	.page-content {
	    min-width: 0px!important;
	}
    </style>
</head>
<!-- /Head -->
<!-- Body -->
<body>
    <!-- Loading Container -->
    <div class="loading-container">
        <div class="loading-progress">
            <div class="rotator">
                <div class="rotator">
                    <div class="rotator colored">
                        <div class="rotator">
                            <div class="rotator colored">
                                <div class="rotator colored"></div>
                                <div class="rotator"></div>
                            </div>
                            <div class="rotator colored"></div>
                        </div>
                        <div class="rotator"></div>
                    </div>
                    <div class="rotator"></div>
                </div>
                <div class="rotator"></div>
            </div>
            <div class="rotator"></div>
        </div>
    </div>
    <!--  /Loading Container -->
    <!-- Navbar -->
    <div class="navbar">
        <div class="navbar-inner">
            <div class="navbar-container">
                <!-- Navbar Barnd -->
                <div class="navbar-header pull-left">
                    <a href="/user/logout" class="navbar-brand">
                        <small>
                            <img src="/img/logo/logo.png" alt="" />
                        </small>
                    </a>
                </div>
                <!-- /Navbar Barnd -->
                <!-- Sidebar Collapse -->
                <div class="sidebar-collapse" id="sidebar-collapse">
                    <i class="collapse-icon fa fa-bars"></i>
                </div>
                <!-- /Sidebar Collapse -->
                <!-- Account Area and Settings --->
                
                <!-- /Account Area and Settings -->
            </div>
        </div>
    </div>
    <!-- /Navbar -->
    <!-- Main Container -->
    <div class="main-container container-fluid">
        <!-- Page Container -->
        <div class="page-container">
            <!-- Page Sidebar -->
            <div class="page-sidebar" id="sidebar">
                
                <ul class="nav sidebar-menu">
                   
                   <li>
                        <a href="javascript:void(0)" onclick="open_latest_trend()">
                            <i class="fa fa-eye"></i>
                            <span class="menu-text"> 实时访客 </span>
                        </a>
                    </li>
                   
                    <li>
                        <a href="javascript:void(0)" onclick="open_user_list_page()">
                            <i class="fa fa-users"></i>
                            <span class="menu-text"> 用户管理 </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="javascript:void(0)" onclick="open_industry_list_page()">
                            <i class="fa fa-graduation-cap"></i>
                            <span class="menu-text"> 行业管理 </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="javascript:void(0)" onclick="open_role_list_page()">
                            <i class="fa fa-key"></i>
                            <span class="menu-text"> 权限管理 </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="javascript:void(0)" onclick="open_user_role_list_page()">
                            <i class="fa fa-lock"></i>
                            <span class="menu-text"> 用户权限管理 </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="javascript:void(0)" onclick="open_topic_list_page()">
                            <i class="fa fa-comments"></i>
                            <span class="menu-text"> 话题管理 </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="javascript:void(0)" onclick="open_create_type_list_page()">
                            <i class="fa fa-magic"></i>
                            <span class="menu-text"> 文章创建类型管理 </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="javascript:void(0)" onclick="open_article_list_page()">
                            <i class="fa fa-book"></i>
                            <span class="menu-text"> 文章管理 </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="javascript:void(0)" onclick="open_article_comment_list_page()">
                            <i class="fa fa-hand-paper-o"></i>
                            <span class="menu-text"> 评论管理 </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="javascript:void(0)" onclick="open_user_follow_list_page()">
                            <i class="fa fa-heart"></i>
                            <span class="menu-text"> 关注管理 </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="javascript:void(0)" onclick="open_article_like_list_page()">
                            <i class="fa fa-thumbs-up"></i>
                            <span class="menu-text"> 文章点赞管理 </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="javascript:void(0)" onclick="open_course_list_page()">
                            <i class="fa fa-youtube-play"></i>
                            <span class="menu-text"> 课程管理 </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="javascript:void(0)" onclick="open_user_course_list_page()">
                            <i class="fa fa-cart-plus"></i>
                            <span class="menu-text"> 课程购买管理 </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="javascript:void(0)" onclick="open_file_type_list_page()">
                            <i class="fa fa-cubes"></i>
                            <span class="menu-text"> 资源类型管理 </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="javascript:void(0)" onclick="open_file_download_list_page()">
                            <i class="fa fa-arrow-circle-o-down"></i>
                            <span class="menu-text"> 资源下载管理 </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="javascript:void(0)" onclick="open_recommended_list_page()">
                            <i class="fa fa-hand-o-right"></i>
                            <span class="menu-text"> 今日推荐管理 </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="javascript:void(0)" onclick="open_advertisement_list_page()">
                            <i class="fa fa-object-group"></i>
                            <span class="menu-text"> 广告_1管理 </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="javascript:void(0)" onclick="open_advertisement2_list_page()">
                            <i class="fa fa-object-group"></i>
                            <span class="menu-text"> 广告_2管理 </span>
                        </a>
                    </li>
                    
                    
                    
                </ul>
            </div>
            <div class="page-content">
            		<div class="page-content-table" id="page-content">
	            		<div class="system-total">
	            			<div id="fileSizePie" style="min-height: 545px;"></div>
	            			<p id="fileSize"></p>
		                <p id="freeSpace"></p>
		                <p id="usableSpace"></p>
		                <p id="totalSpace"></p>
	            		</div>
	            </div>
	            
	            <div class="page-content-table" id="page-content">
	            		<div class="system-total">
	            			<div id="fileSizePie1" style="min-height: 545px;"></div>
	            			<div id="single-size">
	            				
	            			</div>
	            		</div>
	            </div>
            </div>
            
        </div>

    </div>

    
    <script src="/assets/js/bootstrap.min.js"></script>
    <script src="/assets/js/beyond.min.js"></script>
    <script src="/assets/js/datatable/jquery.dataTables.min.js"></script>
    <script src="/assets/js/datatable/ZeroClipboard.js"></script>
    <script src="/assets/js/datatable/dataTables.tableTools.min.js"></script>
    <script src="/assets/js/datatable/dataTables.bootstrap.min.js"></script>
    <script src="/assets/js/datatable/datatables-init.js"></script>
    <script src="/js/bootstrap-datepicker.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/wangEditor.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/jquery.showLoading.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/echarts.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/callUrl.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/m-user.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/m-industry.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/m-role.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/m-user-role.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/m-topic.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/m-createType.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/m-article.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/m-articleComment.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/m-userFollow.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/m-articleLike.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/m-course.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/m-userCourse.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/m-fileType.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/m-fileDownload.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/m-recommended.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/m-advertisement.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/m-advertisement2.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/m-latestTrend.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript">
		function get_img(f) {
			var rd = new FileReader(); //创建文件读取对象
			var files = f.files[0]; //获取file组件中的文件
			rd.readAsDataURL(files); //文件读取装换为base64类型
			rd.onloadend = function(e) {
				document.getElementById("imgs").src = this.result;
			}
		}	
		$(document).ready(function(){
			$.ajax({
				type: "get",
				url: callurl + "/getStaticSize",
				async: true,
				dataType: 'json',
				contentType: 'application/json; charset=UTF-8',
				success: function(data) {
					var content = data.context;
					$('#fileSize').html("工作占用空间：" + content.fileSize + "G");
					$('#freeSpace').html("磁盘剩余空间：" + content.freeSpace + "G");
					$('#usableSpace').html("磁盘可用空间：" + content.usableSpace + "G");
					$('#totalSpace').html("磁盘总空间：" + content.totalSpace + "G");
					loadpie(content.fileSize, content.freeSpace, content.usableSpace, content.totalSpace);
				}
			});
			
			$.ajax({
				type: "get",
				url: callurl + "/getSingleStaticSize",
				async: true,
				dataType: 'json',
				contentType: 'application/json; charset=UTF-8',
				success: function(data) {
					var content = data.context;
					var keys = [];
					var values = [];
					var sizeEle = $('#single-size');
					sizeEle.html('');
					for(var key in content){
//					    console.log(key);        //键名
//					    console.log(content[key]);   //键值
					  	keys.push(key);
					  	var singleData = {
					  		value: content[key],
					  		name: key
					  	}
					  	values.push(singleData);
					  	var html = '<p>' + key + ':' + content[key] + 'M</p>';
					  	sizeEle.append(html);
					}
					loadpie1(keys, values);					
				}
			});
		});
		
		function loadpie1(xValue, yValue){
			var dom = document.getElementById("fileSizePie1");
			var myChart = echarts.init(dom);
			var app = {};
			option = null;
			option = {
			    title : {
			        text: '工作空间使用占比',
			        subtext: 'work',
			        x:'center'
			    },
			    tooltip : {
			        trigger: 'item',
			        formatter: "{a} <br/>{b} : {c} ({d}%)"
			    },
			    legend: {
			        orient: 'vertical',
			        left: 'left',
			        data: xValue
			    },
			    series : [
			        {
			            name: '所占空间',
			            type: 'pie',
			            radius : '55%',
			            center: ['50%', '60%'],
			            data: yValue,
			            itemStyle: {
			                emphasis: {
			                    shadowBlur: 10,
			                    shadowOffsetX: 0,
			                    shadowColor: 'rgba(0, 0, 0, 0.5)'
			                }
			            }
			        }
			    ]
			};
			;
			if (option && typeof option === "object") {
			    myChart.setOption(option, true);
			}
		}
		
		
		function loadpie(fileSize, freeSpace, usableSpace, totalSpace){
			var dom = document.getElementById("fileSizePie");
			var myChart = echarts.init(dom);
			var app = {};
			option = null;
			option = {
			    title : {
			        text: '磁盘空间使用情况',
			        subtext: 'total',
			        x:'center'
			    },
			    tooltip : {
			        trigger: 'item',
			        formatter: "{a} <br/>{b} : {c} ({d}%)"
			    },
			    legend: {
			        orient: 'vertical',
			        left: 'left',
			        data: ['工作已用空间','剩余空间','已用空间']
			    },
			    series : [
			        {
			            name: '所占空间',
			            type: 'pie',
			            radius : '55%',
			            center: ['50%', '60%'],
			            data:[
			            		{value:fileSize, name:'工作已用空间'},
			                {value:freeSpace, name:'剩余空间'},
			                {value:(totalSpace - freeSpace - fileSize), name:'已用空间'}
			            ],
			            itemStyle: {
			                emphasis: {
			                    shadowBlur: 10,
			                    shadowOffsetX: 0,
			                    shadowColor: 'rgba(0, 0, 0, 0.5)'
			                }
			            }
			        }
			    ]
			};
			;
			if (option && typeof option === "object") {
			    myChart.setOption(option, true);
			}
		}
    </script>
    
</body>
</html>
